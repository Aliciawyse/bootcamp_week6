<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Animal Gifs</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <style type="text/css">

        button,
        div,
        form,
        input {
            margin: 5px;
        }

        button {
            padding: 5px;
            font-size: 15px;
            background: steelblue;
            border-radius: 10px;
            color: ghostwhite;
        }

        img {
            width: 175px;
            padding: 1%;
        }

    </style>
</head>

<body>

<section class="container">

    <!-- gif buttons dumped here-->
    <div id="animalView"></div>

    <form>

        <input type="text" placeholder="Add an animal" id="animalInput">
        <!-- submit button triggers new gif to be added -->
        <input id="addGif" type="submit" value="Add a gif">
    </form>

</section>

<!-- gif images dumped here -->
<div id="addAnimal">

</div>

<script>



    //initial array of animal buttons
    var animals = ["dragonfly","flamingo","bird", "butterfly", "ladybug"];

    //use this to display gifs
    function displayGif (){
        var theAnimal = $(this).attr("data-name");
        //console.log(theAnimal);

        var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + theAnimal + "&limit=5&api_key=dc6zaTOxFJmzC";

        //Performing an AJAX GET request to our query URL
        $.ajax({
            url: queryURL,
            method: "GET",
        })
        // After the data from the AJAX request comes back
            .done(function (response) {

                $("#addAnimal").empty();

                for (var i = 0; i < response.data.length; i ++){

                    console.log(response.data[i]);

                    var imageURL = response.data[i].images.original.url;
                    var animatedImage = response.data[i].images.original.url;
                    var stillImage = response.data[i].images.original_still.url;
                    var theGif = $("<img>");

                    //setting the gif image attributes
                    theGif.attr("src", imageURL);
                    theGif.attr("alt", "animal image");
                    theGif.attr("data-still", stillImage);
                    theGif.attr("data-animate", animatedImage);
                    theGif.attr("class", "box");

                    $("#addAnimal").append(theGif);

                }

                //console.log(response.data);
                //$("#addAnimal").html(JSON.stringify(response));
                renderButtons();
            })
    }

    //function to pause gif
    $(".box").on("click", function() {
        console.log("hi");

        console.log($(this).img("src"));

    });


    //function for displaying animal buttons
    function renderButtons() {
        // Delete content inside the animal-view div prior to adding new movies
        // this is necessary otherwise you will have repeat buttons
        $("#animalView").empty();

        for (var i = 0; i < animals.length; i++) {
            var animalButton = $("<button>");
            //Add a class
            animalButton.addClass("animal");
            //Add a data attribute
            animalButton.attr("data-name", animals[i]);
            //Provide the initial button text
            animalButton.text(animals[i]);
            //Add button to the html
            $("#animalView").append(animalButton);

            //$("#animalView").append("<button>" + animals[i] + "</button>");
        }
    }



    //function handles events where button is clicked
    $("#addGif").on("click",function(event) {

        //event.preventDefault() prevents submit button from trying to send a form.   Using a submit button instead of a regular button allows the user to hit "Enter" instead of clicking the button if desired
        // "Enter" instead of clicking the button if desired
        event.preventDefault();

        //grab input from text box and trim extra space
        var userInput = $("#animalInput").val().trim();

        animals.push(userInput);
        console.log(animals);
        renderButtons();
    });





    // Function for displaying the movie info
    // We're adding a click event listener to all elements with the class "movie"
    // We're adding the event listener to the document itself because it will
    // work for dynamically generated elements
    // $(".animal").on("click") will only add listeners to elements that are on the page at that time
    $(document).on("click", ".animal", displayGif);


    renderButtons();



</script>

</body>
</html>